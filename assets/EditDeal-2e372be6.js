import{r as N,w as e,C as Y,D as $,b as Ce,B as te,a6 as O,a3 as se,s as H,Q as xe,a7 as ie,a8 as Ae,a9 as Ne,aa as Se}from"./index-0fbde514.js";import{A as we,a as z,g as le,s as I}from"./App-07d2979b.js";import{u as ne,C}from"./index.esm-c300d7ce.js";import{R as M,C as F}from"./Col-f9fd17ae.js";import{C as ce}from"./Card-0645fe01.js";import{C as oe}from"./CardBody-19a184b5.js";import{C as de}from"./CardHeader-fc299d92.js";import{C as ue}from"./CardTitle-5fd9d3ee.js";import{F as me}from"./Form-4852463e.js";import{F as x}from"./FormFeedback-9cbddee9.js";import{F as R,f as ee,a as Fe}from"./index.esm-425971ee.js";import{I as V,L as A}from"./Label-b9c877a5.js";import{S as P}from"./react-select.esm-2761902e.js";import{C as qe}from"./check-a133135d.js";import{A as ke,w as Ie,S as Pe}from"./ext-component-sweet-alerts-883a5c8d.js";import{F as ae}from"./flatpickr-1c83e082.js";import"./Fade-61dd7030.js";const Le=(r,y,v,s,n,p,f)=>{const _=y("departure_country"),m=y("arrival_country"),g=y("departure_city"),h=y("arrival_city");N.useEffect(()=>{(()=>{if(v&&n.dealData&&n.dealData[p]){const t=v.find(o=>o.id===n.dealData[p].departure_country_id);r("departure_country",(t==null?void 0:t.id)||"")}if(v&&n.dealData&&n.dealData[p]){const t=v.find(o=>o.id===n.dealData[p].arrival_country_id);r("arrival_country",(t==null?void 0:t.id)||"")}if(s&&n.dealData&&n.dealData[p]){const t=s.find(o=>o.id===n.dealData[p].departure_city_id);r("departure_city",(t==null?void 0:t.id)||"")}if(s&&n.dealData&&n.dealData[p]){const t=s.find(o=>o.id===n.dealData[p].arrival_city_id);r("arrival_city",(t==null?void 0:t.id)||"")}if(f&&n.dealData&&n.dealData[p]){const t=f.find(o=>o.id===n.dealData[p].arrival_airport_id);r("arrival_airport",(t==null?void 0:t.id)||"")}if(f&&n.dealData&&n.dealData[p]){const t=f.find(o=>o.id===n.dealData[p].departure_airport_id);r("departure_airport",(t==null?void 0:t.id)||"")}})()},[v,f,s,n.dealData,p,r]),N.useEffect(()=>{if(s&&_){const u=s.find(t=>t.country_id===_);r("departure_city",(u==null?void 0:u.id)||"")}},[s,_,r]),N.useEffect(()=>{if(s&&m){const u=s.find(t=>t.country_id===m);r("arrival_city",(u==null?void 0:u.id)||"")}},[s,m,r]),N.useEffect(()=>{if(f&&g){const u=f.find(t=>t.city_id===g);r("departure_airport",(u==null?void 0:u.id)||"")}},[f,g,r]),N.useEffect(()=>{if(f&&h){const u=f.find(t=>t.city_id===h);r("arrival_airport",(u==null?void 0:u.id)||"")}},[f,h,r])},He=(r,y,v,s,n,p,f,_)=>{const[m,g]=N.useState([]),[h,u]=N.useState([]),[t,o]=N.useState([]),[j,c]=N.useState([]),a=w=>{if(w){const b=r.filter(k=>k.country_id===w);if(g(b),b.length>0){const k=y.filter(U=>U.city_id===b[0].id);o(k)}else o([])}},D=w=>{if(w){const b=r.filter(k=>k.country_id===w);if(u(b),b.length>0){const k=y.filter(U=>U.city_id===b[0].id);c(k)}else c([])}},q=w=>{w&&v("user_id",w)},S=w=>{if(w){const b=y.filter(k=>k.city_id===w);o(b),b.length>0?v("departure_airport",b[0].id):v("departure_airport","")}else o([])},B=w=>{if(w){const b=y.filter(k=>k.city_id===w);c(b),b.length>0?v("arrival_airport",b[0].id):v("arrival_airport","")}else c([])};return N.useEffect(()=>{s&&a(s.id),f&&D(f.id),_&&q(_.id),n&&S(n.id),p&&B(p.id)},[s,f,n,p,_]),{handleDepartureCountryChange:a,handleArrivalCountryChange:D,handleUserChange:q,filteredDepartureCities:m,filteredArrivalCities:h,filteredDepartureAirports:t,handleDepartureCityChange:S,handleArrivalCityChange:B,filteredArrivalAirports:j}},Me=(r,y,v,s,n,p,f,_,m)=>{const[g,h]=N.useState(!1);return{onSubmit:async t=>{h(!0);const o=c=>{const a=["Select City","Select Country","Select Airport",""," ","Select..."];return typeof c=="object"?c!=null&&Object.keys(c).length>0:typeof c!="object"&&c.toString().length>0&&!a.includes(c)};if(Object.values(t).every(o)&&(!y||Object.keys(y).length===0)){console.log(t.duty_free.value);try{const c={id:v,arrival_airport_id:t.arrival_airport,arrival_city_id:t.arrival_city,arrival_country_id:t.arrival_country,delivery_type:t.delivery_type.value,departure_airport_id:t.departure_airport,departure_city_id:t.departure_city,departure_country_id:t.departure_country,flight_number:t.flight_number,price:t.price,user_id:t.user_id,weight:t.weight,status:t.status.value,departure_date:t.departure_date,arrival_date:t.arrival_date,duty_free:t.duty_free.value,user_authenticated:t.user_authenticated.value},a=await n.updateAdminDealDetails(c,v);a.status===201&&(h(!1),localStorage.setItem("lastUpdated",Date.now()),p(f(a.data)),_(e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{className:"me-1",children:e.jsx(we,{size:"sm",color:"success",icon:e.jsx(qe,{size:12})})}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("h6",{children:"Form Submitted!"}),e.jsx("div",{}),e.jsx("span",{children:"You have successfully updated the Deal details!"})]})]})))}catch(c){if(console.log(c),h(!1),c.response&&c.response.status===422){const a=c.response.data.errors;a.user_name?m("user_name",{type:"manual",message:a.user_name?a.user_name:"Incorrect username"}):a.paflightssword?m("flight",{type:"manual",message:a.flight?a.flight:"Incorrect flight"}):a.delivery_type?m("delivery_type",{type:"manual",message:a.delivery_type?a.delivery_type:"Incorrect delivery type"}):a.price?m("price",{type:"manual",message:a.price?a.price:"Incorrect price"}):a.weight?m("weight",{type:"manual",message:a.weight?a.weight:"Incorrect weight"}):a.departure_airport?m("departure_airport",{type:"manual",message:a.departure_airport?a.departure_airport:"Incorrect departure airport"}):a.arrival_airport?m("arrival_airport",{type:"manual",message:a.arrival_airport?a.arrival_airport:"Incorrect arrival airport"}):a.departure_country?m("departure_country",{type:"manual",message:a.departure_country?a.departure_country:"Incorrect country"}):a.arrival_country?m("arrival_country",{type:"manual",message:a.arrival_country?a.arrival_country:"Incorrect country"}):a.departure_city?m("departure_city",{type:"manual",message:a.departure_city?a.departure_city:"Incorrect city"}):a.arrival_city?m("arrival_city",{type:"manual",message:a.arrival_city?a.arrival_city:"Incorrect city"}):a.arrival_date?m("arrival_date",{type:"manual",message:a.arrival_date?a.arrival_date:"Incorrect date"}):a.departure_date?m("departure_date",{type:"manual",message:a.departure_date?a.departure_date:"Incorrect date"}):a.status&&m("status",{type:"manual",message:a.status?a.status:"Incorrect correct status"})}else console.error("Unexpected error:",c)}}else for(const c in t)if(!o(t[c])){const a=t[c]===""||typeof t[c]=="object"&&Object.keys(t[c]).length===0?`The ${c} field has no available options.`:`The ${c} field is required.`;m(c,{type:"manual",message:a})}},isLoading:g,setIsLoading:h}},Re={confirmCheckbox:!1},T=Ie(Pe),Ue=({id:r})=>{const y=z(),v=Y(),s=new $,{control:n,setError:p,handleSubmit:f,formState:{errors:_}}=ne({defaultValues:Re}),m=async()=>{const h=await T.fire({title:"Are you sure?",text:"Are you sure you would like to delete the deal?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ms-1"},buttonsStyling:!1});if(h.value)try{y(O(!0)),await s.deleteAdminDeal(r),y(O(!1)),T.fire({icon:"success",title:"Deleted!",text:"Your account has been deactivated.",customClass:{confirmButton:"btn btn-success"}}),v(le())}catch(u){console.log(u)}else h.dismiss===T.DismissReason.cancel&&T.fire({title:"Cancelled",text:"Deletion Cancelled!!",icon:"error",customClass:{confirmButton:"btn btn-success"}})},g=h=>{h.confirmCheckbox===!0?m():p("confirmCheckbox",{type:"manual"})};return e.jsxs(ce,{children:[e.jsx(de,{className:"border-bottom",children:e.jsx(ue,{tag:"h4",children:"Delete Deal"})}),e.jsxs(oe,{className:"py-2 my-25",children:[e.jsxs(ke,{color:"warning",children:[e.jsx("h4",{className:"alert-heading",children:"Are you sure you want to delete a deal?"}),e.jsx("div",{className:"alert-body fw-normal",children:"Once you delete your deal, there is no going back. Please be certain."})]}),e.jsxs(me,{onSubmit:f(g),children:[e.jsxs("div",{className:"form-check",children:[e.jsx(C,{control:n,name:"confirmCheckbox",render:({field:h})=>e.jsx(V,{...h,type:"checkbox",id:"confirmCheckbox",checked:h.value,invalid:_.confirmCheckbox&&!0})}),e.jsx(A,{for:"confirmCheckbox",className:Ce("form-check-label",{"text-danger":_&&_.confirmCheckbox}),children:"I confirm to delete the deal"}),_&&_.confirmCheckbox&&e.jsx(x,{children:"Please confirm that you want to delete a deal"})]}),e.jsx("div",{className:"mt-1",children:e.jsx(te,{color:"danger",children:"Delete Deal"})})]})]})]})},Be=(r,y,v,s,n)=>{var t,o;const p=r.find(j=>{var c;return j.id===((c=s==null?void 0:s.dealData[n])==null?void 0:c.departure_country_id)}),f=r.find(j=>{var c;return j.id===((c=s==null?void 0:s.dealData[n])==null?void 0:c.arrival_country_id)}),_=y.find(j=>{var c;return j.id===((c=s==null?void 0:s.dealData[n])==null?void 0:c.departure_city_id)}),m=y.find(j=>{var c;return j.id===((c=s==null?void 0:s.dealData[n])==null?void 0:c.arrival_city_id)}),g=v.find(j=>{var c;return j.id===((c=s==null?void 0:s.dealData[n])==null?void 0:c.departure_airport_id)}),h=v.find(j=>{var c;return j.id===((c=s==null?void 0:s.dealData[n])==null?void 0:c.arrival_airport_id)}),u=((o=(t=s.dealData[n])==null?void 0:t.user)==null?void 0:o.find(j=>{var c;return j.id===((c=s==null?void 0:s.dealData[n])==null?void 0:c.user_id.id)}))||null;return{defaultDepartureCountry:p,defaultArrivalCountry:f,defaultDepartureCity:_,defaultArrivalCity:m,defaultDepartureAirport:g,defaultArrivalAirport:h,defaultUser:u}},re=r=>{const{options:y,children:v,maxHeight:s,getValue:n}=r,[p]=n(),f=y.indexOf(p)*35,_=inputValue&&!y.some(g=>g.label.toLowerCase().includes(inputValue.toLowerCase())),m=_?65:s;return e.jsx(Fe,{height:m,itemCount:_?1:v.length,itemSize:35,initialScrollOffset:f,width:"100%",children:({index:g,style:h})=>e.jsx("div",{style:h,children:_?e.jsx("div",{style:{...h,textAlign:"center"},children:"No Option"}):v[g]})})},Te=({redux:r})=>{var W,G,Q,J,K,X,Z;Y();const y=z(),v=new $,{id:s}=se(),n=[{value:"approved",label:"Approved"},{value:"pending",label:"Pending"},{value:"rejected",label:"Rejected"}],[p,f]=N.useState(""),_=[{value:"hand_luggage",label:"Hand Luggage"},{value:"baggage",label:"Baggage"},{value:"document",label:"Document"}],m=[{value:0,label:"Inactive"},{value:1,label:"Active"}],g=[{value:0,label:"Unauthenticated"},{value:1,label:"Authenticated"}],h=(W=r.dealData[s])==null?void 0:W.user,{control:u,setValue:t,setError:o,watch:j,handleSubmit:c,formState:{errors:a}}=ne(),D=H(i=>i.dealData.countries),q=H(i=>i.dealData.cities),S=H(i=>i.dealData.airports);Le(t,j,D,q,r,s,S);const{defaultDepartureCountry:B,defaultDepartureCity:w,defaultArrivalCity:b,defaultArrivalCountry:k,defaultUser:U}=Be(D,q,S,r,s),{handleDepartureCountryChange:he,handleArrivalCountryChange:pe,handleDepartureCityChange:fe,handleArrivalCityChange:ye,handleUserChange:ve,filteredDepartureCities:_e,filteredArrivalCities:ge,filteredDepartureAirports:je,filteredArrivalAirports:De}=He(q,S,t,B,w,b,k,U),{onSubmit:be,isLoading:E}=Me(c,a,s,r,v,y,ie,xe,o);return e.jsxs(N.Fragment,{children:[e.jsxs(ce,{children:[e.jsx(de,{className:"border-bottom",children:e.jsx(ue,{tag:"h4",children:"Edit Deal Details"})}),e.jsx(oe,{className:"py-2 my-25",children:e.jsxs(me,{className:"mt-2 pt-50",onSubmit:c(be),children:[e.jsxs(M,{children:[e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"UserIdAsync",children:"User"}),e.jsx(C,{defaultValue:((G=r==null?void 0:r.dealData[s])==null?void 0:G.user_id)||"",control:u,rules:{required:"Username is required"},id:"UserIDAsync",name:"user_id",render:({field:i})=>{const l=h==null?void 0:h.find(d=>d.id===i.value);return e.jsx(P,{options:[...Array.isArray(h)?h.map(d=>({value:d.id,label:d.name})):[]],classNamePrefix:"select",theme:I,value:l?{value:l.id,label:l.name}:null,onChange:d=>{i.onChange(d.value),ve(d.value)}})}}),a.user_id&&e.jsx(x,{children:a.user_id.message})]})}),e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"flightAsync",children:"Flight"}),e.jsx(C,{defaultValue:((Q=r==null?void 0:r.dealData[s])==null?void 0:Q.flight_number)||"",control:u,rules:{required:"Flight is required"},id:"flightAsync",name:"flight_number",render:({field:i})=>e.jsx(V,{...i,placeholder:"Flight",type:"text",invalid:a.flight&&!0})}),a.flight&&e.jsx(x,{children:a.flight.message})]})})]}),e.jsxs(M,{children:[e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"priceAsync",children:"Price"}),e.jsx(C,{defaultValue:((J=r==null?void 0:r.dealData[s])==null?void 0:J.price)||"",control:u,rules:{required:"Price is required"},id:"priceAsync",name:"price",render:({field:i})=>e.jsx(V,{...i,type:"number",placeholder:"Price",invalid:a.price&&!0})}),a.price&&e.jsx(x,{children:a.price.message})]})}),e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"weightAsync",children:"Weight"}),e.jsx(C,{defaultValue:((K=r==null?void 0:r.dealData[s])==null?void 0:K.weight)||"",control:u,rules:{required:"Weight is required"},id:"weightAsync",name:"weight",render:({field:i})=>e.jsx(V,{...i,type:"text",placeholder:"Weight",invalid:a.weight&&!0})}),a.weight&&e.jsx(x,{children:a.weight.message})]})})]}),e.jsxs(M,{children:[e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"departure_countryAsync",children:"Departure Country"}),e.jsx(C,{control:u,rules:{required:"Departure country is required"},id:"departure_countryAsync",name:"departure_country",defaultValue:D&&D.find(i=>{var l;return i.id===((l=r.dealData[s])==null?void 0:l.departure_country_id)})||"",render:({field:i})=>{const l=D==null?void 0:D.find(d=>d.id===i.value);return e.jsx(P,{options:[...Array.isArray(D)?D.map(d=>({value:d.id,label:d.nicename})):[]],classNamePrefix:"select",theme:I,value:l?{value:l.id,label:l.nicename}:null,onChange:d=>{i.onChange(d.value),he(d.value)}})}}),a.departure_country&&e.jsx(x,{children:a.departure_country.message})]})}),e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"arrival_countryAsync",children:"Arrival Country"}),e.jsx(C,{control:u,rules:{required:"Arrival country is required"},id:"arrival_countryAsync",name:"arrival_country",defaultValue:D&&D.find(i=>{var l;return i.id===((l=r.dealData[s])==null?void 0:l.arrival_country_id)})||"",render:({field:i})=>{const l=D==null?void 0:D.find(d=>d.id===i.value);return e.jsx(P,{options:[...Array.isArray(D)?D.map(d=>({value:d.id,label:d.nicename})):[]],classNamePrefix:"select",theme:I,value:l?{value:l.id,label:l.nicename}:null,onChange:d=>{i.onChange(d.value),pe(d.value)}})}}),a.arrival_country&&e.jsx(x,{children:a.arrival_country.message})]})})]}),e.jsxs(M,{children:[e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"departure_cityAsync",children:"Departure City"}),e.jsx(C,{control:u,rules:{required:"Departure city is required"},id:"departure_cityAsync",name:"departure_city",className:"my-custom-controller",render:({field:i})=>{var d;const l=q==null?void 0:q.find(L=>L.id===i.value);return e.jsxs(R,{className:"my-custom-controller",children:[e.jsx(P,{options:_e.map(L=>({value:L.id,label:L.name})),classNamePrefix:"select",theme:I,value:l?{value:l.id,label:l.name}:null,onChange:L=>{i.onChange(L.value),fe(L.value)},className:a.departure_city?"is-invalid":"",components:{MenuList:re},onInputChange:L=>f(L)}),e.jsx(x,{children:(d=a.departure_city)==null?void 0:d.message})]})}})]})}),e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"arrival_cityAsync",children:"Arrival City"}),e.jsx(C,{control:u,rules:{required:"Arrival city is required"},id:"arrival_cityAsync",name:"arrival_city",defaultValue:q&&q.find(i=>{var l;return i.id===((l=r.dealData[s])==null?void 0:l.arrival_city_id)})||"",render:({field:i})=>{const l=q==null?void 0:q.find(d=>d.id===i.value);return e.jsxs(R,{className:"my-custom-controller",children:[e.jsx(P,{options:ge.map(d=>({value:d.id,label:d.name})),classNamePrefix:"select",theme:I,value:l?{value:l.id,label:l.name}:null,onChange:d=>{i.onChange(d.value),ye(d.value)},className:a.arrival_city?"is-invalid":"",components:{MenuList:re},onInputChange:d=>f(d)}),a.arrival_city&&e.jsx(x,{children:a.arrival_city.message})]})}})]})})]}),e.jsxs(M,{children:[e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"departure_airportAsync",children:"Departure Airport"}),e.jsx(C,{control:u,rules:{required:"Departure Airport is required"},id:"departure_airportAsync",name:"departure_airport",defaultValue:S&&S.find(i=>{var l;return i.id===((l=r.dealData[s])==null?void 0:l.departure_airport_id)})||"",render:({field:i})=>{const l=S==null?void 0:S.find(d=>d.id===i.value);return e.jsxs(R,{className:"my-custom-controller",children:[e.jsx(P,{options:je.map(d=>({value:d.id,label:d.airport_name})),classNamePrefix:"select",theme:I,value:l?{value:l.id,label:l.airport_name}:null,onChange:d=>i.onChange(d.value),className:a.departure_airport?"is-invalid":""}),a.departure_airport&&e.jsx(x,{children:a.departure_airport.message})]})}})]})}),e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"arrival_airportAsync",children:"Arrival Airport"}),e.jsx(C,{control:u,rules:{required:"Arrival airport is required"},id:"arrival_airportAsync",name:"arrival_airport",defaultValue:S&&S.find(i=>{var l;return i.id===((l=r.dealData[s])==null?void 0:l.arrival_airport_id)})||"",render:({field:i})=>{const l=S==null?void 0:S.find(d=>d.id===i.value);return e.jsxs(R,{className:"my-custom-controller",children:[e.jsx(P,{options:De.map(d=>({value:d.id,label:d.airport_name})),classNamePrefix:"select",theme:I,value:l?{value:l.id,label:l.airport_name}:null,onChange:d=>i.onChange(d.value),className:a.arrival_airport?"is-invalid":""}),a.arrival_airport&&e.jsx(x,{children:a.arrival_airport.message})]})}})]})})]}),e.jsxs(M,{children:[e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"departure_dateAsync",children:"Departure Date"}),e.jsx(C,{control:u,rules:{required:"Departure date is required"},id:"departure_dateAsync",name:"departure_date",defaultValue:((X=r==null?void 0:r.dealData[s])==null?void 0:X.departure_date)||"",render:({field:i})=>e.jsx(R,{className:"my-custom-controller",children:e.jsxs("div",{children:[e.jsx(ae,{...i,value:i.value,"data-enable-time":!0,id:"departure-picker",className:`form-control ${a.departure_date?"is-invalid":""}`,options:{dateFormat:"Y-m-d H:i:S",enableTime:!0},onChange:l=>{i.onChange(ee(l[0],"yyyy-MM-dd HH:mm:ss"))}}),a.departure_date&&e.jsx(x,{children:a.departure_date.message})]})})})]})}),e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"arrival_dateAsync",children:"Arrival Date"}),e.jsx(C,{control:u,rules:{required:"Arrival date is required"},id:"arrival_dateAsync",name:"arrival_date",defaultValue:((Z=r==null?void 0:r.dealData[s])==null?void 0:Z.arrival_date)||"",render:({field:i})=>e.jsx(R,{className:"my-custom-controller",children:e.jsxs("div",{children:[e.jsx(ae,{...i,value:i.value,"data-enable-time":!0,id:"arrival-picker",className:`form-control ${a.arrival_date?"is-invalid":""}`,options:{dateFormat:"Y-m-d H:i:S",enableTime:!0},onChange:l=>{i.onChange(ee(l[0],"yyyy-MM-dd HH:mm:ss"))}}),a.arrival_date&&e.jsx(x,{children:a.arrival_date.message})]})})})]})})]}),e.jsxs(M,{children:[e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"delivery_type",children:"Delivery Type"}),e.jsx(C,{name:"delivery_type",id:"delivery_typeAsync",defaultValue:_.find(i=>{var l;return i.value===((l=r==null?void 0:r.dealData[s])==null?void 0:l.delivery_type)}),control:u,rules:{required:"Delivery Type is required"},render:({field:i})=>e.jsx(P,{options:_,classNamePrefix:"select",theme:I,...i})}),a.delivery_type&&e.jsx(x,{children:a.delivery_type.message})]})}),e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"statusAsync",children:"Status"}),e.jsx(C,{id:"react-select",control:u,name:"status",defaultValue:n.find(i=>{var l;return i.value===((l=r==null?void 0:r.dealData[s])==null?void 0:l.status)}),render:({field:i})=>e.jsx(P,{options:n,classNamePrefix:"select",theme:I,...i})}),a.status&&e.jsx(x,{children:a.status.message})]})})]}),e.jsxs(M,{children:[e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"duty_free",children:"Duty Free Delivery"}),e.jsx(C,{name:"duty_free",id:"duty_freeAsync",defaultValue:m.find(i=>{var l;return i.value===((l=r==null?void 0:r.dealData[s])==null?void 0:l.duty_free)}),control:u,rules:{required:"Duty Free Field is required"},render:({field:i})=>e.jsx(P,{options:m,classNamePrefix:"select",theme:I,...i})}),a.duty_free&&e.jsx(x,{children:a.duty_free.message})]})}),e.jsx(F,{md:"6",children:e.jsxs("div",{className:"mb-1",children:[e.jsx(A,{className:"form-label",for:"user_authenticatedAsync",children:"User Authentication"}),e.jsx(C,{id:"react-select",control:u,name:"user_authenticated",defaultValue:g.find(i=>{var l;return i.value===((l=r==null?void 0:r.dealData[s])==null?void 0:l.user_authenticated)}),render:({field:i})=>e.jsx(P,{options:g,classNamePrefix:"select",theme:I,...i})}),a.user_authenticated&&e.jsx(x,{children:a.user_authenticated.message})]})})]}),e.jsx("div",{className:"d-flex",children:e.jsx(te,{className:"me-1",color:"primary",disabled:E,type:"submit",children:"Submit"})}),e.jsx("div",{id:"loading-overlay",style:{display:E?"flex":"none"},children:e.jsx("div",{className:"loader"})})]})})]}),e.jsx(Ue,{id:s})]})},Ve=({dataVersion:r})=>{const y=N.useMemo(()=>new $,[]),v=Y(),{id:s}=se(),n=z(),p=H(t=>{var o;return(o=t.dealData)==null?void 0:o.dealData[s]}),f=H(t=>{var o;return(o=t.dealData)==null?void 0:o.version}),_=H(t=>{var o;return(o=t.dealData)==null?void 0:o.countries}),m=H(t=>{var o;return(o=t.dealData)==null?void 0:o.cities}),g=H(t=>{var o;return(o=t.dealData)==null?void 0:o.airports}),[h,u]=N.useState(!1);return N.useEffect(()=>{(async()=>{if(!(p&&f===r))try{n(O(!0));const j=(await y.getAdminDealData(s)).data[0];n(ie(j))}catch(o){console.error("Error fetching deal data:",o),o.response.status===404&&v(le())}finally{n(O(!1))}})()},[s,n,r,p,f,v,y]),N.useEffect(()=>{(async()=>{if(!h&&(!_.length||!m.length||!g.length))try{const o=await y.getAdminAllData();o&&(_.length||n(Ae(o.data.countries)),m.length||n(Ne(o.data.cities)),g.length||n(Se(o.data.airports)),u(!0))}catch(o){console.error("Error fetching countries, cities, or airports:",o)}})()},[_.length,m.length,g.length,h,n,y]),null},ia=()=>{const r=H(f=>f.dealData),y=r==null?void 0:r.loading,v=r==null?void 0:r.loadingCountries,s=r==null?void 0:r.loadingCities,n=r==null?void 0:r.loadingAirports,p=y||v||s||n;return e.jsxs("div",{children:[e.jsx(Ve,{dataVersion:r==null?void 0:r.version}),p?e.jsx("div",{id:"loading-overlay",style:{display:"flex"},children:e.jsx("div",{className:"loader"})}):e.jsx(Te,{dataVersion:r==null?void 0:r.version,redux:r??""})]})};export{ia as default};
