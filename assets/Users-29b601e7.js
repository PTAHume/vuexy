import{D,a0 as V,ad as G,w as e,L as w,r as c,B as y,Q as O}from"./index-ba44b7eb.js";import{A as J,E as X,S as q,P as K,a as Y,Q as Z,C as _,R as ee}from"./index.es-618fa935.js";import{A as v,U as se,D as W,b as A,c as N,F as ae,d as te,M as re,X as ne,a as le,P as ie}from"./App-fe7f84ea.js";import{I as h,L as p}from"./Label-b369fbe2.js";import{M as oe,T as ce}from"./trash-0f28bee3.js";import{F as de}from"./flatpickr-1ae1bcaa.js";import{M as me,a as ue,b as he,B as xe,D as pe}from"./dollar-sign-2c2b5f35.js";import{I as g,a as f}from"./InputGroupText-76d8efcd.js";import{C as je}from"./calendar-f7087975.js";import{u as ge}from"./useSubscribeToChannel-f4b1ed66.js";import{R as fe,C as Ce}from"./Col-dd7260b6.js";import{C as Ne}from"./Card-497d08fd.js";import{C as be}from"./CardHeader-df40cbd9.js";import{C as we}from"./CardTitle-4476e78b.js";import{U as ye}from"./UncontrolledButtonDropdown-6cae49c9.js";import{C as ve}from"./check-12c31b66.js";import"./Fade-e8e13395.js";const ke=new D,De=V("user/updateUserStatus",async({userId:l,status:a},{dispatch:s})=>{try{return await ke.updateAdminStatus(l,a),s(G.actions.updateUserStatus({userId:l,status:a})),a}catch(n){throw console.log(n),new Error("Error updating status")}}),Se=["success","danger","warning","info","dark","primary","secondary"],k=new D,Le=(l,a)=>[{name:"ID",sortable:!0,maxWidth:"100px",selector:s=>s.id},{name:"Name",sortable:!0,minWidth:"225px",selector:s=>s.name,cell:s=>e.jsxs("div",{className:"d-flex align-items-center",children:[s.image===""?e.jsx(v,{color:`light-${Se[s.status]}`,content:s.name,initials:!0}):e.jsx(v,{img:`${k.baseurl()}${s.image}`}),e.jsx("div",{className:"user-info text-truncate ms-1",children:e.jsx("span",{className:"d-block fw-bold text-truncate",children:e.jsx(w,{to:`${s.id}/edit`,state:{userDatas:s},children:s.name})})})]})},{name:"Email",sortable:!0,minWidth:"310px",selector:s=>s.email},{name:"Mobile",sortable:!0,minWidth:"250px",selector:s=>s.mobile},{name:"Status",sortable:!0,minWidth:"175px",selector:s=>s.status,cell:s=>{const[n,i]=c.useState(parseInt(s.status,10)===1),d=async()=>{try{const m=n?0:1;toast.promise(a(De({userId:s.id,status:m})),{position:"bottom-left",loading:"Updating the Status...",success:()=>(i(!n),"Saved successfully!"),error:C=>(console.log(C),"Error updating!")})}catch(m){return console.log(m),"Invalid Data!"}};return e.jsxs("div",{className:"form-switch form-check-primary",children:[e.jsx(h,{type:"switch",name:"icon-primary",id:"icon-primary",checked:n,onChange:()=>i(!n),onClick:d}),e.jsx("div",{style:{marginTop:"-1.4rem"},children:n?"Active":"InActive"})]})}},{name:"Actions",allowOverflow:!0,cell:s=>{const n=async i=>{try{await k.deleteAdminUser(s.id),console.log("User deleted successfully"),l()}catch(d){console.log(d)}};return e.jsxs("div",{className:"d-flex",children:[e.jsxs(se,{children:[e.jsx(W,{className:"pe-1",tag:"span",style:{cursor:"pointer"},children:e.jsx(oe,{size:15})}),e.jsxs(A,{end:!0,children:[e.jsxs(N,{tag:w,to:`${s.id}/edit`,className:"w-100",children:[e.jsx(ae,{size:15}),e.jsx("span",{className:"align-middle ms-50",children:"Details"})]}),e.jsxs(N,{tag:"a",href:"/",className:"w-100",onClick:i=>i.preventDefault(),children:[e.jsx(J,{size:15}),e.jsx("span",{className:"align-middle ms-50",children:"Archive"})]}),e.jsxs(N,{tag:"a",href:"/",className:"w-100",onClick:i=>{i.preventDefault(),n(s.id)},children:[e.jsx(ce,{size:15}),e.jsx("span",{className:"align-middle ms-50",children:"Delete"})]})]})]}),e.jsx(w,{to:`${s.id}/edit`,children:e.jsx(X,{size:15})})]})}}],Pe=async()=>{try{return(await k.getAdminUserData()).data}catch(l){console.log(l)}},ze=({open:l,handleModal:a})=>{const[s,n]=c.useState(new Date),i=e.jsx(ne,{className:"cursor-pointer",size:15,onClick:a});return e.jsxs(me,{isOpen:l,toggle:a,className:"sidebar-sm",modalClassName:"modal-slide-in",contentClassName:"pt-0",children:[e.jsx(ue,{className:"mb-1",toggle:a,close:i,tag:"div",children:e.jsx("h5",{className:"modal-title",children:"New Record"})}),e.jsxs(he,{className:"flex-grow-1",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx(p,{className:"form-label",for:"full-name",children:"Full Name"}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(te,{size:15})}),e.jsx(h,{id:"full-name",placeholder:"Bruce Wayne"})]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx(p,{className:"form-label",for:"post",children:"Post"}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(xe,{size:15})}),e.jsx(h,{id:"post",placeholder:"Web Developer"})]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx(p,{className:"form-label",for:"email",children:"Email"}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(re,{size:15})}),e.jsx(h,{type:"email",id:"email",placeholder:"brucewayne@email.com"})]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx(p,{className:"form-label",for:"joining-date",children:"Joining Date"}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(je,{size:15})}),e.jsx(de,{className:"form-control",id:"joining-date",value:s,onChange:d=>n(d)})]})]}),e.jsxs("div",{className:"mb-1",children:[e.jsx(p,{className:"form-label",for:"salary",children:"Salary"}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(pe,{size:15})}),e.jsx(h,{type:"number",id:"salary"})]})]}),e.jsx(y,{className:"me-1",color:"primary",onClick:a,children:"Submit"}),e.jsx(y,{color:"secondary",onClick:a,outline:!0,children:"Cancel"})]})]})},Re=c.forwardRef((l,a)=>e.jsx("div",{className:"form-check",children:e.jsx(h,{type:"checkbox",ref:a,...l})}));function We(l,a,s,n,i){return e.jsx(ee,{previousLabel:"",nextLabel:"",forcePage:l,onPageChange:d=>a(d),pageCount:s.length?Math.ceil(n.length/7):Math.ceil(i.length/7)||1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",nextLinkClassName:"page-link",pageLinkClassName:"page-link",breakLinkClassName:"page-link",previousLinkClassName:"page-link",nextClassName:"page-item next-item",previousClassName:"page-item prev-item",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pe-1 mt-1"})}const Ke=()=>{const[l,a]=c.useState([]),[s,n]=c.useState(!1),[i,d]=c.useState(0),[m,C]=c.useState(""),[S,T]=c.useState([]),[b,L]=c.useState([]),[U,j]=c.useState(!0),I=new D,E=le(),P=()=>n(!s),M=t=>{t.response&&t.response.status===401&&I.refreshToken()},B=t=>{console.log(t)},F=t=>{j(!0);const r=t.users;L(u=>{const o=u.findIndex(x=>x.id===(r==null?void 0:r.id));return o!==-1?[...u.slice(0,o),r,...u.slice(o+1)]:u}),setTimeout(()=>{j(!1),O(e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{className:"me-1",children:e.jsx(v,{size:"sm",color:"success",icon:e.jsx(ve,{size:12})})}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("h6",{children:"Form Updated!"}),e.jsx("div",{}),e.jsx("span",{children:"List Updated by Admin!"})]})]}))},400)},z=async()=>{try{j(!0);const t=await Pe();L(t),j(!1)}catch(t){console.log(t),j(!1)}},$=Le(z,E);c.useEffect(()=>{z()},[]),ge("users",M,B,F);const H=t=>{const r=t.target.value;let u=[];C(r),r.length&&(u=b.filter(o=>{const x=o.name.toLowerCase().startsWith(r.toLowerCase())||o.email.toLowerCase().startsWith(r.toLowerCase())||o.mobile.toLowerCase().startsWith(r.toLowerCase())||o.image.toLowerCase().startsWith(r.toLowerCase()),R=o.name.toLowerCase().includes(r.toLowerCase())||o.email.toLowerCase().includes(r.toLowerCase())||o.mobile.toLowerCase().startsWith(r.toLowerCase())||o.image.toLowerCase().startsWith(r.toLowerCase());return x||(!x&&R?R:null)}),T(u),C(r))},Q=t=>{d(t.selected)};return e.jsxs(c.Fragment,{children:[e.jsxs(Ne,{children:[e.jsxs(be,{className:"flex-md-row flex-column align-md-items-center align-items-start border-bottom",children:[e.jsx(we,{tag:"h4",children:"Users List"}),e.jsxs("div",{className:"d-flex mt-md-0 mt-1",children:[e.jsxs(ye,{children:[e.jsxs(W,{color:"secondary",caret:!0,outline:!0,children:[e.jsx(q,{size:15}),e.jsx("span",{className:"align-middle ms-50",children:"Export"})]}),e.jsx(A,{children:e.jsxs(N,{className:"w-100",children:[e.jsx(K,{size:15}),e.jsx("span",{className:"align-middle ms-50",children:"Print"})]})})]}),e.jsxs(y,{className:"ms-2",color:"primary",onClick:P,children:[e.jsx(Y,{size:15}),e.jsx("span",{className:"align-middle ms-50",children:"Add Record"})]})]})]}),e.jsx(fe,{className:"justify-content-end mx-0",children:e.jsxs(Ce,{className:"d-flex align-items-center justify-content-end mt-1",md:"6",sm:"12",children:[e.jsx(p,{className:"me-1",for:"search-input",children:"Search"}),e.jsx(h,{className:"dataTable-filter mb-50",type:"text",bsSize:"sm",id:"search-input",value:m,onChange:H})]})}),e.jsx("div",{className:"react-dataTable react-dataTable-selectable-rows",children:U?e.jsx("div",{className:"d-flex justify-content-center align-items-center py-5",children:e.jsx(ie,{color:"primary"})}):e.jsx(Z,{noHeader:!0,pagination:!0,selectableRows:!0,columns:$,paginationPerPage:7,className:"react-dataTable",sortIcon:e.jsx(_,{size:10}),paginationComponent:()=>We(i,Q,m,S,b),paginationDefaultPage:i+1,selectableRowsComponent:Re,data:m.length?S:b,onSelectedRowsChange:t=>a(t.selectedRows)})})]}),e.jsx(ze,{open:s,handleModal:P})]})};export{Ke as default};
