import{r as m,d as C,P as v,w as e,b as $,B as ue,aC as me,Q as fe,aD as we,aE as Se,aF as Ce,aG as Oe,aH as _e,aI as ke,a3 as Me,D as De,aJ as xe,aK as Le,aL as $e,aM as ge,aN as ze,aO as je,s as pe,aP as Pe}from"./index-e113e7ac.js";import{a as se,k as B,j as Ee,A as U,l as E,U as Ie,D as Ue,b as We,c as W,X as K,m as qe,B as Te,M as Fe,h as Ae}from"./App-0bb43d29.js";import{F as Re}from"./Form-917f1020.js";import{I as Q,L as Be}from"./Label-5276616f.js";import{I as ve,a as be}from"./InputGroupText-632e8ac4.js";import{u as He}from"./useSubscribeToChannel-2c911145.js";import{M as Ge,S as Ne}from"./search-91c48df1.js";import{M as Je,T as Ke}from"./trash-fc924ace.js";import{C as Qe}from"./CardText-4fd62e93.js";function V(){return V=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},V.apply(this,arguments)}function Ve(s,r){if(s==null)return{};var a=Xe(s,r),t,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)t=l[i],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(s,t)&&(a[t]=s[t])}return a}function Xe(s,r){if(s==null)return{};var a={},t=Object.keys(s),i,l;for(l=0;l<t.length;l++)i=t[l],!(r.indexOf(i)>=0)&&(a[i]=s[i]);return a}var ae=m.forwardRef(function(s,r){var a=s.color,t=a===void 0?"currentColor":a,i=s.size,l=i===void 0?24:i,u=Ve(s,["color","size"]);return C.createElement("svg",V({ref:r,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),C.createElement("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"}))});ae.propTypes={color:v.string,size:v.oneOfType([v.string,v.number])};ae.displayName="Bell";const Ye=ae;function X(){return X=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},X.apply(this,arguments)}function Ze(s,r){if(s==null)return{};var a=es(s,r),t,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)t=l[i],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(s,t)&&(a[t]=s[t])}return a}function es(s,r){if(s==null)return{};var a={},t=Object.keys(s),i,l;for(l=0;l<t.length;l++)i=t[l],!(r.indexOf(i)>=0)&&(a[i]=s[i]);return a}var te=m.forwardRef(function(s,r){var a=s.color,t=a===void 0?"currentColor":a,i=s.size,l=i===void 0?24:i,u=Ze(s,["color","size"]);return C.createElement("svg",X({ref:r,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),C.createElement("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),C.createElement("polyline",{points:"21 15 16 10 5 21"}))});te.propTypes={color:v.string,size:v.oneOfType([v.string,v.number])};te.displayName="Image";const Y=te;function Z(){return Z=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},Z.apply(this,arguments)}function ss(s,r){if(s==null)return{};var a=as(s,r),t,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)t=l[i],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(s,t)&&(a[t]=s[t])}return a}function as(s,r){if(s==null)return{};var a={},t=Object.keys(s),i,l;for(l=0;l<t.length;l++)i=t[l],!(r.indexOf(i)>=0)&&(a[i]=s[i]);return a}var re=m.forwardRef(function(s,r){var a=s.color,t=a===void 0?"currentColor":a,i=s.size,l=i===void 0?24:i,u=ss(s,["color","size"]);return C.createElement("svg",Z({ref:r,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),C.createElement("polygon",{points:"22 2 15 22 11 13 2 9 22 2"}))});re.propTypes={color:v.string,size:v.oneOfType([v.string,v.number])};re.displayName="Send";const ts=re;function ee(){return ee=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(s[t]=a[t])}return s},ee.apply(this,arguments)}function rs(s,r){if(s==null)return{};var a=ns(s,r),t,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(i=0;i<l.length;i++)t=l[i],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(s,t)&&(a[t]=s[t])}return a}function ns(s,r){if(s==null)return{};var a={},t=Object.keys(s),i,l;for(l=0;l<t.length;l++)i=t[l],!(r.indexOf(i)>=0)&&(a[i]=s[i]);return a}var ne=m.forwardRef(function(s,r){var a=s.color,t=a===void 0?"currentColor":a,i=s.size,l=i===void 0?24:i,u=rs(s,["color","size"]);return C.createElement("svg",ee({ref:r,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},u),C.createElement("circle",{cx:"12",cy:"12",r:"10"}),C.createElement("line",{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"}))});ne.propTypes={color:v.string,size:v.oneOfType([v.string,v.number])};ne.displayName="Slash";const is=ne,ls=s=>{var R,le,ce,oe,de,he;const{handleUser:r,handleUserSidebarRight:a,handleSidebar:t,store:i,userSidebarLeft:l}=s,{userProfile:u,selectedUser:f,selectedChatUniqueId:O,enableSendMessage:p}=i,M=m.useRef(),b=se(),[k,D]=m.useState(""),q=localStorage.getItem("skin"),I=()=>{var g;const n=((g=M.current)==null?void 0:g._container)||M.current;n.scrollTop=Number.MAX_SAFE_INTEGER},c=f.find(n=>n.id===O),_=(le=(R=c==null?void 0:c.data)==null?void 0:R.chat)==null?void 0:le.id,z=i.oldestMessageId,H=(de=(oe=(ce=c==null?void 0:c.data)==null?void 0:ce.contact)==null?void 0:oe.chat)==null?void 0:de.firstMessage,G=n=>{},T=n=>{n.response&&n.response.status},F=async(n,g,y,j)=>{await n(ke(g.map(w=>{if(w.data.chat.unique_id===y){const o={...w,data:{...w.data,chat:{...w.data.chat}}};return o.data.chat.chat.find(L=>L.id===j.original_id)?o.data.chat.chat=o.data.chat.chat.map(L=>L.id===j.original_id?{...L,id:j.id}:L):o.data.chat.chat=w.data.chat.chat.concat([j]),o}return w})))};He("chats",T,G,async(n,g)=>{var w;if((n==null?void 0:n.chat)===null)return;const y=n.chat.rateLimitStatuses.find(o=>o.user_id===u.id);if(y){if((y==null?void 0:y.button)==="disabled"&&p===!0){b(me(!1)),fe.info("Too many consecutive requests made in too sort a time span! Please wait a moment before trying again, you will be notified when you can send a message again");return}else if((y==null?void 0:y.button)==="enabled"&&p===!1){b(me(!0)),fe.info("You may continue sending messages agin now, please be mindful not to spam chat!");return}}if(((w=n==null?void 0:n.chat)==null?void 0:w.newMessageData)===null)return;b(we(n==null?void 0:n.chat));const j={id:n.chat.newMessageData.message_id,chat_id:n.chat.id,message:n.chat.newMessageData.message,sender_id:n.chat.newMessageData.senderId,original_id:n.chat.newMessageData.original_id,time:new Date(n.chat.newMessageData.time)};await F(b,g,O,j)},f);const J=async()=>{try{await b(Se()),await b(Ce({chatId:_,oldestMessageId:z||H||null}))}catch(n){console.error("Error in loadMoreMsgs:",n)}finally{b(Oe())}};m.useEffect(()=>{c&&Object.keys(c).length&&I()},[c]);const x=()=>{var w;let n=[];c.data.chat&&(n=(w=c.data.chat)==null?void 0:w.chat);const g=[];let y=n[0]?n[0].sender_id:void 0,j={sender_id:y,messages:[]};return n.forEach((o,L)=>{y===o.sender_id?j.messages.push({msg:o.message,time:o.time,id:o.id,status:o.status}):(y=o.sender_id,g.push(j),j={sender_id:o.sender_id,messages:[{msg:o.message,time:o.time,id:o.id,status:o.status}]}),L===n.length-1&&g.push(j)}),g},h=()=>x().map(n=>e.jsxs("div",{className:$("chat",{"chat-left":n.sender_id!==u.id}),children:[e.jsx("div",{className:"chat-avatar",children:e.jsx(U,{imgWidth:36,imgHeight:36,className:"box-shadow-1 cursor-pointer",img:n.sender_id!==u.id?`${E}/${c.data.contact.avatar}`:`${E}/${u.image}`})}),e.jsx("div",{className:"chat-body",children:n.messages.map(g=>{const j=new Date(g.time).toLocaleString("en-GB",{hour12:!0});return e.jsxs("div",{className:"chat-content",children:[e.jsx("p",{children:g.msg}),e.jsx("small",{style:{fontSize:"8px",color:q==='"dark"'?"#fefe":"#000",fontStyle:"italic"},children:g.status??j})]},g.id)})})]},`${n.sender_id}-${n.messages[0].id}`)),d=n=>{a(),r(n)},N=()=>{!Object.keys(c).length&&!l&&window.innerWidth<992&&t()},S=async n=>{const j=Math.floor(Math.random()*-98)+-1;if(n.preventDefault(),k.trim().length){const w=new Date,o={id:j,chat_id:c.data.chat.id,message:k,sender_id:u.id,original_id:j,time:w};f.find(ye=>ye.data.chat.unique_id===O)&&(await b(_e({message:{request:{data:{id:o.id,chat_id:o.chat_id,message:o.message,sender_id:o.sender_id,original_id:o.original_id,time:o.time}}}})),await F(b,f,O,o)),D("")}},P=c&&Object.keys(c).length&&((he=c==null?void 0:c.data)!=null&&he.chat)?B:"div",A=(n,g)=>n.data.chat?e.jsx("div",{className:"chats",children:g()}):null;return e.jsxs("div",{className:"chat-app-window",children:[e.jsxs("div",{className:$("start-chat-area",{"d-none":c&&Object.keys(c).length}),children:[e.jsx("div",{className:"start-chat-icon mb-1",children:e.jsx(Ge,{})}),e.jsx("h4",{className:"sidebar-toggle start-chat-text",onClick:N,children:"Start Conversation"})]}),c&&Object.keys(c).length?e.jsxs("div",{className:$("active-chat",{"d-none":c===null}),children:[e.jsx("div",{className:"chat-navbar",children:e.jsxs("header",{className:"chat-header",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"sidebar-toggle d-block d-lg-none me-1",onClick:t,children:e.jsx(Ee,{size:21})}),e.jsx(U,{imgHeight:"36",imgWidth:"36",img:`${E}/${c.data.contact.avatar}`,status:c.data.contact.status,className:"avatar-border user-profile-toggle m-0 me-1",onClick:()=>d(c.data.contact)}),e.jsx("h6",{className:"mb-0",children:c.data.contact.fullName})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(Ne,{size:18,className:"cursor-pointer d-sm-block d-none"}),e.jsxs(Ie,{className:"more-options-dropdown",children:[e.jsx(Ue,{className:"btn-icon",color:"transparent",size:"sm",children:e.jsx(Je,{size:"18"})}),e.jsxs(We,{end:!0,children:[e.jsx(W,{href:"/",onClick:n=>n.preventDefault(),children:"View Contact"}),e.jsx(W,{href:"/",onClick:n=>n.preventDefault(),children:"Mute Notifications"}),e.jsx(W,{href:"/",onClick:n=>n.preventDefault(),children:"Block Contact"}),e.jsx(W,{href:"/",onClick:n=>n.preventDefault(),children:"Clear Chat"}),e.jsx(W,{href:"/",onClick:n=>n.preventDefault(),children:"Report"})]})]})]})]})}),e.jsxs(P,{ref:M,className:"user-chats",options:{wheelPropagation:!1},children:[e.jsx(ue,{style:{display:"block",marginLeft:"auto",marginRight:"auto"},onClick:()=>J(),disabled:z==="FINISHED",children:z==="FINISHED"?"No more messages":"Load More Messages"}),i.isLoadingMoreMsg?e.jsx("div",{id:"loading-overlay",style:{display:"flex"},children:e.jsx("div",{className:"loader"})}):A(c,h)]}),e.jsxs(Re,{className:"chat-app-form",onSubmit:n=>S(n),children:[e.jsxs(ve,{className:"input-group-merge me-1 form-send-message",children:[e.jsx(Q,{value:k,onChange:n=>D(n.target.value),placeholder:"Type your message or use speech to text"}),e.jsx(be,{children:e.jsxs(Be,{className:"attachment-icon mb-0",for:"attach-doc",children:[e.jsx(Y,{className:"cursor-pointer text-secondary",size:14}),e.jsx("input",{disabled:!0,type:"file",id:"attach-doc",hidden:!0})]})})]}),e.jsxs(ue,{disabled:!p,className:"send",color:"primary",children:[e.jsx(ts,{size:14,className:"d-lg-none"}),e.jsx("span",{className:"d-none d-lg-block",children:"Send"})]})]})]}):null]})},cs=s=>{const{id:r}=Me(),{store:a,sidebar:t,handleSidebar:i,userSidebarLeft:l,handleUserSidebarLeft:u}=s,{chats:f,contacts:O,userProfile:p}=a,[M,b]=m.useState({chatId:null,userId:null,uniqueId:null}),[k,D]=m.useState([]),[q,I]=m.useState([]),c=x=>Object.keys(x).length===0&&x.constructor===Object,_=se(),[z,H]=m.useState(""),G=new De,T=async x=>{var h;try{let d=f.find(S=>S.unique_id===x);if(d||(await _(xe()).unwrap(),await G.getUserChatContacts().then(S=>{var P,A;d=(A=(P=S==null?void 0:S.data)==null?void 0:P.chatsContacts)==null?void 0:A.find(R=>R.unique_id===x)})),!d)return;const N=a.selectedUser.find(S=>{var P;return S.data.chat.id===((P=d.chat)==null?void 0:P.id)});!N||N.data.chat.id!==((h=d.chat)==null?void 0:h.id)?(window.localStorage.setItem("EnableSendMessage",JSON.stringify(!0)),_(Le()),_($e(d==null?void 0:d.unique_id)),_(ge(d==null?void 0:d.unique_id)),_(ze(null))):(b({chatId:N.data.chat.id,userId:N.data.contact.id,uniqueId:N.id}),_(ge(d==null?void 0:d.unique_id))),t===!0&&i()}catch(d){console.error(d)}finally{_(je())}},F=x=>{T(x)};m.useEffect(()=>{var x,h,d;if(!c(a.selectedUser)){const N=a.selectedUser.find(S=>S.data.chat.unique_id===a.selectedChatUniqueId);N&&b({chatId:(x=N.data.chat)==null?void 0:x.id,userId:(h=N.data.contact)==null?void 0:h.id,uniqueId:(d=N.data.chat)==null?void 0:d.unique_id})}},[a.selectedUser,a.selectedChatUniqueId]),m.useEffect(()=>{r&&T(r)},[r]);const ie=()=>f&&f.length?z.length&&!k.length?e.jsx("li",{className:"no-results show",children:e.jsx("h6",{className:"mb-0",children:"No Chats Found"})}):(z.length&&k.length?k:f).map(h=>{const d=qe(h.chat.lastMessage?h.chat.lastMessage.time:new Date);return e.jsxs("li",{onClick:()=>F(h.unique_id),className:$({active:M.uniqueId===h.unique_id}),children:[e.jsx(U,{img:`${E}/${h.avatar}`,imgHeight:"42",imgWidth:"42",status:h.status}),e.jsxs("div",{className:"chat-info flex-grow-1",children:[e.jsx("h5",{className:"mb-0",children:h.about}),e.jsx(Qe,{className:"text-truncate",children:h.chat.lastMessage?h.chat.lastMessage.message:f[f.length-1].message})]}),e.jsxs("div",{className:"chat-meta text-nowrap",children:[e.jsx("small",{className:"float-end mb-25 chat-time ms-25",children:d}),h.chat.unseenMsgsForUser>=1&&p.id!==h.chat.lastMessage.senderId?e.jsx(Te,{className:"float-end",color:"danger",pill:!0,children:h.chat.unseenMsgsForUser}):null]})]},`${h.chat.id}_${h.id}`)}):null,J=x=>{H(x.target.value);const h=S=>S.fullName.toLowerCase().includes(x.target.value.toLowerCase()),d=f==null?void 0:f.filter(h),N=O==null?void 0:O.filter(h);Array.isArray(d)?D([...d]):D([]),Array.isArray(N)?I([...N]):I([])};return a?e.jsx("div",{className:"sidebar-left",children:a.isLoading?e.jsx("div",{id:"loading-overlay",style:{display:"flex"},children:e.jsx("div",{className:"loader"})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"sidebar",children:[e.jsxs("div",{className:$("chat-profile-sidebar",{show:l}),children:[e.jsxs("header",{className:"chat-profile-header",children:[e.jsx("div",{className:"close-icon",onClick:u,children:e.jsx(K,{size:14})}),e.jsxs("div",{className:"header-profile-sidebar",children:[e.jsx(U,{className:"box-shadow-1 avatar-border",img:`${E}/${p.image}`,status:p.online_status,size:"xl"}),e.jsx("h4",{className:"chat-user-name",children:p.fullName}),e.jsx("span",{className:"user-post",children:p.role})]})]}),e.jsxs(B,{className:"profile-sidebar-area",options:{wheelPropagation:!1},children:[e.jsx("h6",{className:"section-label mb-1 mt-2",children:"Settings"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsxs("li",{className:"d-flex justify-content-between align-items-center mb-1",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(Ye,{className:"me-75",size:"18"}),e.jsx("span",{className:"align-middle",children:"Notification"})]}),e.jsx("div",{className:"form-switch",children:e.jsx(Q,{type:"switch",id:"notifications",name:"notifications"})})]}),e.jsxs("li",{className:"d-flex align-items-center cursor-pointer",children:[e.jsx(Ke,{className:"me-75",size:"18"}),e.jsx("span",{className:"align-middle",children:"Delete Chat"})]})]})]})]}),e.jsxs("div",{className:$("sidebar-content",{show:t===!0}),children:[e.jsx("div",{className:"sidebar-close-icon",onClick:i,children:e.jsx(K,{size:14})}),e.jsx("div",{className:"chat-fixed-search",children:e.jsxs("div",{className:"d-flex align-items-center w-100",children:[e.jsx("div",{className:"sidebar-profile-toggle",onClick:u,children:Object.keys(p).length?e.jsx(U,{className:"avatar-border",img:`${E}/${p.image}`,status:p.online_status,imgHeight:"42",imgWidth:"42"}):null}),e.jsxs(ve,{className:"input-group-merge ms-1 w-100",children:[e.jsx(be,{className:"round",children:e.jsx(Ne,{className:"text-muted",size:14})}),e.jsx(Q,{value:z,className:"round",placeholder:"Search or start a new chat",onChange:J})]})]})}),e.jsxs(B,{className:"chat-user-list-wrapper list-group",options:{wheelPropagation:!1},children:[e.jsx("h4",{className:"chat-list-title",children:"Airline Baggages"}),e.jsx("ul",{className:"chat-users-list chat-list media-list",children:ie()}),e.jsx("h4",{className:"chat-list-title",children:"Hotels"}),e.jsx("ul",{className:"chat-users-list contact-list media-list"}),e.jsx("h4",{className:"chat-list-title",children:"Coupons"}),e.jsx("ul",{className:"chat-users-list contact-list media-list"})]})]})]})})}):null},os=s=>{const{user:r,handleUserSidebarRight:a,userSidebarRight:t}=s;return e.jsxs("div",{className:$("user-profile-sidebar",{show:t===!0}),children:[e.jsxs("header",{className:"user-profile-header",children:[e.jsx("span",{className:"close-icon",onClick:a,children:e.jsx(K,{size:14})}),e.jsxs("div",{className:"header-profile-sidebar",children:[e.jsx(U,{className:"box-shadow-1 avatar-border",size:"xl",status:r.status,img:r.avatar?`${E}/${r.avatar}`:"",imgHeight:"70",imgWidth:"70"}),e.jsx("h4",{className:"chat-user-name",children:r.fullName}),e.jsx("span",{className:"user-post",children:r.role})]})]}),e.jsxs(B,{className:"user-profile-sidebar-area",options:{wheelPropagation:!1},children:[e.jsx("h6",{className:"section-label mb-1",children:"Delivery Details"}),e.jsx("p",{children:r.about}),e.jsx("p",{children:r.departure_date}),e.jsx("p",{children:r.arrival_date}),e.jsx("p",{children:r.flight_number??"Not mentioned"}),e.jsxs("p",{children:[r.weight," Kg"]}),e.jsxs("p",{children:[r.price,"$"]}),e.jsxs("div",{className:"personal-info",children:[e.jsx("h6",{className:"section-label mb-1 mt-3",children:"Personal Information"}),e.jsx("ul",{className:"list-unstyled",children:e.jsxs("li",{className:"mb-1",children:[e.jsx(Fe,{className:"me-75",size:17}),e.jsx("span",{className:"align-middle",children:r.user_authenticated===1?"Authenticated":"Unatuhenticated"})]})})]}),e.jsxs("div",{className:"more-options",children:[e.jsx("h6",{className:"section-label mb-1 mt-3",children:"Options"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsxs("li",{className:"cursor-pointer mb-1",children:[e.jsx(Y,{className:"me-50",size:17}),e.jsx("span",{className:"align-middle",children:" Go to Seller Profile"})]}),e.jsxs("li",{className:"cursor-pointer mb-1",children:[e.jsx(Y,{className:"me-50",size:17}),e.jsx("span",{className:"align-middle",children:" Go to Offer"})]}),e.jsxs("li",{className:"cursor-pointer",children:[e.jsx(is,{className:"me-75",size:17}),e.jsx("span",{className:"align-middle",children:"Block Contact"})]})]})]})]})]})};const vs=()=>{const s=pe(c=>Ae(c)),r=pe(c=>c.chatData),a=se(),[t,i]=m.useState({}),[l,u]=m.useState(!1),[f,O]=m.useState(!1),[p,M]=m.useState(!1),b=()=>u(!l),k=()=>M(!p),D=()=>O(!f),q=()=>{u(!1),O(!1),M(!1)},I=c=>i(c);return m.useEffect(()=>{(async()=>{try{await Promise.all([a(xe()).unwrap(),a(Pe(s.id)).unwrap()])}catch(_){console.error("Error fetching data:",_)}finally{a(je())}})()},[a,s.id]),e.jsx(m.Fragment,{children:r.isLoading?e.jsx("div",{id:"loading-overlay",style:{display:"flex"},children:e.jsx("div",{className:"loader"})}):e.jsxs(e.Fragment,{children:[e.jsx(cs,{store:r,sidebar:l,handleSidebar:b,userSidebarLeft:p,handleUserSidebarLeft:k}),e.jsx("div",{className:"content-right",children:e.jsx("div",{className:"content-wrapper",children:e.jsxs("div",{className:"content-body",children:[e.jsx("div",{className:$("body-content-overlay",{show:f===!0||l===!0||p===!0}),onClick:q}),e.jsx(ls,{store:r,handleUser:I,handleSidebar:b,userSidebarLeft:p,handleUserSidebarRight:D}),e.jsx(os,{user:t,userSidebarRight:f,handleUserSidebarRight:D})]})})})]})})};export{vs as default};
